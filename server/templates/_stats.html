<div class="stats-cards" id="stats-cards-inner">
  <div class="stat-card">
    <div class="stat-card__label">MARK (BTCUSD)</div>
    <div class="stat-card__value" id="stat-mark">{% if mark %}{{ '%.2f'|format(mark) }}{% else %}--{% endif %}</div>
    <div class="stat-card__delta stat-card__delta--neutral">live</div>
  </div>
  <div class="stat-card stat-card--balances">
    <div class="stat-card__label">BALANCES</div>
    <div class="balances-mini-wrapper">
      {% if balances %}
      <table class="balances-mini">
        <thead><tr><th>Avail</th><th>Blocked</th><th>Total</th><th>Margin%</th></tr></thead>
        <tbody>
        {% for asset, row in balances.items() %}
          {% set avail = (row.available_balance|float) %}
          {% set total = (row.total_balance|float) %}
          {% set blocked = (total - avail) %}
          {% set pct = (avail / total * 100) if total and total != 0 else None %}
          {% set pct_cls = 'm-high' if pct is not none and pct >= 70 else ('m-mid' if pct is not none and pct >= 30 else 'm-low') %}
          <tr>
            <td>${{ '%.2f'|format(avail) }}</td>
            <td>${{ '%.2f'|format(blocked) }}</td>
            <td>${{ '%.2f'|format(total) }}</td>
            <td class="{{ pct_cls }}">{{ pct is not none and ('%.1f'|format(pct)) or '-' }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
      {% else %}
        <div class="placeholder">No data</div>
      {% endif %}
    </div>
  </div>
</div>